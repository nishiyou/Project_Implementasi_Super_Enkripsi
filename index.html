<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

    <title>Kriptografi Aaron Jason</title>
  </head>
  <body>
    <div class="container  mt-3 rounded">
        <h5 class="font-weight-normal">Aaron Jason | Kriptografi</h5>
        <hr>
        <div class="jumbotron">
            <h2 class="font-weight-bold">Implementasi Super Enkripsi</h2>
            <p>Web ini dibuat untuk memenuhi Ujian Tengah Semester matakuliah Kriptografi dengan mengimplementasikan enkripsi. Pada program ini dibuat dengan menggunakan algoritma Vigenere Cipher dan Caesar Chiper. </p>

            <form action="">
                <div class="form-group">
                    <label for="teks">Masukkan Teks : </label>
                    <textarea class="form-control" id="teks" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="kunci">Kunci Vigenere :</label>
                    <input type="text" class="form-control" id="kunci">
                </div>
                <div class="form-group">
                    <label for="kunci-caesar">Kunci Caesar :</label>
                    <input type="number" class="form-control" id="kunci_caesar">
                </div>
                <button type="button" class="btn btn-primary" id="enkripsi">Enkripsi</button>
                <h4 class="mt-3">Enkripsi 1: Algoritma Vigenere Cipher</h4>
                <table class="table table-bordered">
                    
                    <tbody>
                      <tr>
                        <th scope="row" width="40%">Pesan yang akan di enkripsi</th>
                        <td >
                            <textarea type="text" class="bg-transparent border-0 form-control" id="pesan1" disabled></textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Kunci</th>
                        <td>
                            <textarea type="text" class="bg-transparent border-0 form-control" id="kunci1" disabled></textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Hasil Enkripsi</th>
                        <td>
                            <textarea type="text" class="bg-transparent border-0 form-control" id="hasil_enkripsi1" disabled></textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Deskripsi</th>
                        <td>
                            <textarea type="text" class="bg-transparent border-0 form-control" id="deskripsi1" disabled></textarea>
                        </td>
                      </tr>
                    </tbody>
                </table>
                <h4 class="mt-3">Enkripsi 2: Algoritma Caesar Cipher</h4>
                <p>Untuk enkripsi kedua digunakan algoritma Caesar Cipher untuk mengenkripsi hasil enkripsi dari vigenere Cipher</p>
                <table class="table table-bordered">
                    
                    <tbody>
                      <tr>
                        <th scope="row" width="40%">Pesan yang akan di enkripsi</th>
                        <td >
                            <textarea type="text" class="bg-transparent border-0 form-control" id="pesan2" disabled></textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Kunci</th>
                        <td>
                            <textarea type="text" class="bg-transparent border-0 form-control" id="kunci2" disabled></textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Hasil Enkripsi</th>
                        <td>
                            <textarea type="text" class="bg-transparent border-0 form-control" id="hasil_enkripsi2" disabled></textarea>
                        </td>
                      </tr>
                      <tr>
                        <th scope="row">Deskripsi</th>
                        <td>
                            <textarea type="text" class="bg-transparent border-0 form-control" id="deskripsi2" disabled></textarea>
                        </td>
                      </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
    

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>

    <script>
        function generateKey(str,key)
{
     
     key=key.split("");
    if(str.length == key.length)
        return key.join("");
    else
    {
        let temp=key.length;   
        for (let i = 0;i<(str.length-temp) ; i++)
        {
             
            key.push(key[i % ((key).length)])
        }
    }
    return key.join("");
}
 
// This function returns the encrypted text
// generated with the help of the key
function cipherText(str,key)
{
    str = str.toUpperCase().split(' ').join('');
    let cipher_text="";
  
    for (let i = 0; i < str.length; i++)
    {
        // converting in range 0-25
        let x = (str[i].charCodeAt(0) + key[i].charCodeAt(0)) %26;
  
        // convert into alphabets(ASCII)
        x += 'A'.charCodeAt(0);
  
        cipher_text+=String.fromCharCode(x);
    }
    return cipher_text;
}
 
// This function decrypts the encrypted text
// and returns the original text
function originalText(cipher_text,key)
{
    let orig_text="";
  
    for (let i = 0 ; i < cipher_text.length ; i++)
    {
        // converting in range 0-25
        let x = (cipher_text[i].charCodeAt(0) -
                    key[i].charCodeAt(0) + 26) %26;
  
        // convert into alphabets(ASCII)
        x += 'A'.charCodeAt(0);
        orig_text+=String.fromCharCode(x);
    }
    return orig_text;
}
 
// This function will convert the lower
// case character to Upper case
function LowerToUpper(s)
{
    let str =(s).split("");
    for(let i = 0; i < s.length; i++)
    {
        if(s[i] == s[i].toLowerCase())
        {
            str[i] = s[i].toUpperCase();
        }
    }
    s = str.toString();
    return s;
}

function encrypt(text, s)
{
    text = text.toUpperCase();
    let result=""
    for (let i = 0; i < text.length; i++)
    {
        let char = text[i];
        if (char.toUpperCase(text[i]))
        {
            let ch =  String.fromCharCode((char.charCodeAt(0) + s-65) % 26 + 65);
            result += ch;
        }
        else
        {
            let ch = String.fromCharCode((char.charCodeAt(0) + s-97) % 26 + 97);
            result += ch;
        }
    }
    return result;
}
    
    
// Driver code

$('#enkripsi').on('click', function(){
    str = $('#teks').val();
    keyword = $('#kunci').val();
    key_caesar = parseInt($('#kunci_caesar').val());

    keyword = keyword.toUpperCase();

    let key = generateKey(str, keyword);
 
    let cipher_text = cipherText(str, key);
    original_text = originalText(cipher_text, key);
    caesar_chiper = encrypt(cipher_text, key_caesar);
    decrip_caesar = encrypt(caesar_chiper, -key_caesar);
    
   
    // decrip_caesar = decrypt(caesar_chiper, s)
    
    $('#pesan1').val(str);
    $('#kunci1').val(key);
    $('#hasil_enkripsi1').val(cipher_text);
    $('#deskripsi1').val(original_text);
    
    $('#pesan2').val(cipher_text);
    $('#kunci2').val(key_caesar);
    $('#hasil_enkripsi2').val(caesar_chiper);
    $('#deskripsi2').val(decrip_caesar);
    
    
})


    
    
    </script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
    -->
  </body>
</html>